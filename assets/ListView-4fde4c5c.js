import{k as ue,g as ie,a0 as se,$ as re,f as T,r as C,i as ce,a4 as de,j as t,a5 as M,X as U,Y as fe,a6 as k,ak as ve,n as O,a8 as me,ab as _e,ac as f,ad as he,ae as m,af as xe,al as z,ag as l,am as _,an as X,u as h,ao as Y,ah as G,ap as H,ai as S}from"./index-46117ca9.js";import{m as Ve,f as ke,V as ye,a as ge,b as Ce,u as pe}from"./forwardRefs-98aba70e.js";import{m as Ie,u as we,V as J,a as D,b as be}from"./VInput-637b74d5.js";import{V as Q}from"./VTable-ca5ecdb2.js";const Fe=["color","file","time","date","datetime-local","week","month"],Pe=ue({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Ie(),...Ve()},"VTextField"),W=ie()({name:"VTextField",directives:{Intersect:se},inheritAttrs:!1,props:Pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,B){let{attrs:y,emit:p,slots:o}=B;const s=re(e,"modelValue"),{isFocused:x,focus:N,blur:$}=we(e),A=T(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:(s.value??"").toString().length),I=T(()=>{if(y.maxlength)return y.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),g=T(()=>["plain","underlined"].includes(e.variant));function E(a,c){var d,V;!e.autofocus||!a||(V=(d=c[0].target)==null?void 0:d.focus)==null||V.call(d)}const w=C(),b=C(),i=C(),u=T(()=>Fe.includes(e.type)||e.persistentPlaceholder||x.value||e.active);function r(){var a;i.value!==document.activeElement&&((a=i.value)==null||a.focus()),x.value||N()}function n(a){p("mousedown:control",a),a.target!==i.value&&(r(),a.preventDefault())}function F(a){r(),p("click:control",a)}function v(a){a.stopPropagation(),r(),O(()=>{s.value=null,me(e["onClick:clear"],a)})}function Z(a){var d;const c=a.target;if(s.value=c.value,(d=e.modelModifiers)!=null&&d.trim&&["text","search","password","tel","url"].includes(e.type)){const V=[c.selectionStart,c.selectionEnd];O(()=>{c.selectionStart=V[0],c.selectionEnd=V[1]})}}return ce(()=>{const a=!!(o.counter||e.counter!==!1&&e.counter!=null),c=!!(a||o.details),[d,V]=de(y),{modelValue:Ue,...ee}=J.filterProps(e),te=ke(e);return t(J,M({ref:w,modelValue:s.value,"onUpdate:modelValue":P=>s.value=P,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":g.value},e.class],style:e.style},d,ee,{centerAffix:!g.value,focused:x.value}),{...o,default:P=>{let{id:R,isDisabled:K,isDirty:q,isReadonly:ne,isValid:le}=P;return t(ye,M({ref:b,onMousedown:n,onClick:F,"onClick:clear":v,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},te,{id:R.value,active:u.value||q.value,dirty:q.value||e.dirty,disabled:K.value,focused:x.value,error:le.value===!1}),{...o,default:ae=>{let{props:{class:L,...oe}}=ae;const j=U(t("input",M({ref:i,value:s.value,onInput:Z,autofocus:e.autofocus,readonly:ne.value,disabled:K.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:r,onBlur:$},oe,V),null),[[fe("intersect"),{handler:E},null,{once:!0}]]);return t(k,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[t("span",{class:"v-text-field__prefix__text"},[e.prefix])]),o.default?t("div",{class:L,"data-no-activator":""},[o.default(),j]):ve(j,{class:L}),e.suffix&&t("span",{class:"v-text-field__suffix"},[t("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:c?P=>{var R;return t(k,null,[(R=o.details)==null?void 0:R.call(o,P),a&&t(k,null,[t("span",null,null),t(ge,{active:e.persistentCounter||x.value,value:A.value,max:I.value},o.counter)])])}:void 0})}),Ce({},w,b,i)}}),Se=l("h1",{class:"text-center"},"事項",-1),Be=l("thead",null,[l("tr",null,[l("th",null,"名稱"),l("th",null,"操作")])],-1),Ee={key:0},Re=l("td",{colspan:"2"},"沒有事項",-1),Te=[Re],De=l("h1",{class:"text-center"},"已完成事項",-1),Ne=l("thead",null,[l("tr",null,[l("td",null,"名稱"),l("td",null,"操作")])],-1),$e={key:0},Ae=l("td",{colspan:"2"},"沒有已完成事項",-1),Me=[Ae],Oe={__name:"ListView",setup(e){const B=pe(),{items:y,finishedItems:p}=_e(B),{addItem:o,editItem:s,delItem:x,cancelEditItem:N,confirmEditItem:$,delFinishedItem:A}=B,I=C(""),g=C(null),E=C([]),w=async()=>{const u=await g.value.validate();console.log(u),!(u.length>0)&&(o(I.value),g.value.reset())},b=async(u,r)=>{(await E.value[r].validate()).length>0||$(u)},i={required:u=>!!u||"欄位必填",length:u=>u.length>=3||"必須三個字以上"};return(u,r)=>(f(),he(xe,null,{default:m(()=>[t(be,null,{default:m(()=>[t(D,{cols:"12"},{default:m(()=>[Se]),_:1}),t(D,{cols:"12"},{default:m(()=>[t(W,{clearable:"",variant:"solo-filled",label:"新增事項",modelValue:I.value,"onUpdate:modelValue":r[0]||(r[0]=n=>I.value=n),rules:[i.required,i.length],"append-icon":"mdi-plus",ref_key:"newItemInput",ref:g,"onClick:append":w,onKeydown:z(w,["enter"])},null,8,["modelValue","rules"]),t(Q,{hover:""},{default:m(()=>[Be,l("tbody",null,[(f(!0),_(k,null,X(h(y),(n,F)=>(f(),_("tr",{key:n.id},[l("td",null,[U(l("span",null,G(n.name),513),[[H,!n.edit]]),U(t(W,{modelValue:n.model,"onUpdate:modelValue":v=>n.model=v,rules:[i.required,i.length],ref_for:!0,ref_key:"editItemInput",ref:E,onKeydown:z(v=>b(n.id,F),["enter"]),autofocus:""},null,8,["modelValue","onUpdate:modelValue","rules","onKeydown"]),[[H,n.edit]])]),l("td",null,[n.edit?(f(),_(k,{key:1},[t(S,{icon:"mdi-check",variant:"text",color:"green",onClick:v=>b(n.id,F)},null,8,["onClick"]),t(S,{icon:"mdi-undo",variant:"text",color:"red",onClick:v=>h(N)(n.id)},null,8,["onClick"])],64)):(f(),_(k,{key:0},[t(S,{icon:"mdi-pencil",variant:"text",color:"green",onClick:v=>h(s)(n.id)},null,8,["onClick"]),t(S,{icon:"mdi-delete",variant:"text",color:"red",onClick:v=>h(x)(n.id)},null,8,["onClick"])],64))])]))),128)),h(y).length===0?(f(),_("tr",Ee,Te)):Y("",!0)])]),_:1})]),_:1}),t(D,{cols:"12"},{default:m(()=>[De]),_:1}),t(D,{cols:"12"},{default:m(()=>[t(Q,{hover:""},{default:m(()=>[Ne,l("tbody",null,[(f(!0),_(k,null,X(h(p),n=>(f(),_("tr",{key:n.id},[l("td",null,G(n.name),1),l("td",null,[t(S,{icon:"mdi-delete",variant:"text",color:"red",onClick:F=>h(A)(n.id)},null,8,["onClick"])])]))),128)),h(p).length===0?(f(),_("tr",$e,Me)):Y("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Oe as default};
